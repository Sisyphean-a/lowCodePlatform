# 低代码平台设计器

一个功能强大、易于使用的低代码平台设计器，基于 Vue 3 + Vuetify 构建。采用 **CSS Grid 布局框架**，支持可视化拖拽设计、智能网格对齐、丰富的组件库和完善的属性配置。

## ✨ 核心特性

### � Grid 布局框架
- **智能网格系统**：基于 CSS Grid 的现代布局框架，确保设计与代码完全一致
- **可视化网格线**：清晰显示网格边界，支持 1-12 列灵活配置
- **智能对齐**：组件自动对齐到网格单元格，每个组件占用固定高度（60px）
- **实时预览**：所见即所得的设计体验，配置变更立即生效

### 🧩 丰富的组件库
- **布局组件**：容器、卡片、分割线
- **表单组件**：输入框、文本域、选择器、单选框组、复选框组、开关、滑块、日期选择器
- **展示组件**：文本、标题、图片、表格
- **交互组件**：按钮、链接

### 🛠️ 强大的工具栏
- **撤销/重做**：完整的操作历史管理
- **复制/粘贴**：支持组件的复制粘贴操作
- **Grid 布局控制**：列数调整（1-12列）、间距设置（0-50px）、网格线显示/隐藏
- **自动排列**：一键自动排列所有组件到网格布局
- **布局预设**：2列、3列、4列、6列快速布局模板

### 📋 多面板管理
- **组件库面板**：分类展示所有可用组件，支持搜索和筛选
- **属性配置面板**：动态属性配置、实时预览
- **布局配置面板**：完整的 Grid 布局配置，包括行列数、间距、预设等
- **结构面板**：组件层级结构展示和管理

### ⌨️ 快捷键支持
- `Ctrl+Z` / `Cmd+Z`：撤销
- `Ctrl+Y` / `Cmd+Y`：重做
- `Delete` / `Backspace`：删除选中组件
- `Escape`：取消选择

## 🚀 快速开始

### 环境要求

- Node.js 16+
- npm 或 yarn

### 安装依赖

```bash
npm install
```

### 启动开发服务器

```bash
npm run dev
```

### 构建生产版本

```bash
npm run build
```

### 预览生产版本

```bash
npm run preview
```

## 📖 使用指南

### 基本操作

1. **添加组件**
   - 从左侧组件库拖拽组件到网格画布
   - 组件自动对齐到最近的网格单元格
   - 每个组件占用一个网格单元格（60px高度）

2. **选择和配置组件**
   - 单击组件进行选择
   - 在右侧属性面板中修改组件属性
   - 支持实时预览属性变化

3. **Grid 布局配置**
   - 点击右侧"布局"标签页打开Grid配置面板
   - 调整列数（1-12列）、行间距、列间距
   - 使用预设模板快速设置常用布局
   - 开启/关闭网格线显示

4. **代码生成**
   - 点击顶部工具栏的"预览代码"查看生成的 Vue 代码
   - 点击"导出代码"下载代码文件

### Grid 布局使用技巧

1. **网格可视化**
   - 确保"显示网格线"选项已开启
   - 网格线清晰显示每个单元格的边界
   - 蓝色边框标识整个网格区域

2. **组件定位**
   - 组件会自动对齐到网格单元格
   - 从左到右、从上到下依次填充
   - 使用"自动排列"重新整理所有组件

3. **布局优化**
   - 根据内容调整列数和间距
   - 使用预设模板快速切换布局
   - 保持一致的网格对齐提升视觉效果

## 🎯 Grid 布局框架详解

### 设计理念

本低代码平台采用 **CSS Grid 布局** 作为核心布局框架，确保设计器中的可视化效果与最终生成的代码完全一致。

### 核心优势

1. **设计与代码一致性**：设计器中看到的网格布局与生成的代码完全相同
2. **现代化标准**：基于 CSS Grid 原生标准，性能优异
3. **可视化网格**：清晰的网格线显示，每个单元格边界一目了然
4. **智能对齐**：组件自动对齐到网格单元格，避免布局混乱

### 配置选项

| 配置项     | 说明                 | 默认值 | 范围       |
| ---------- | -------------------- | ------ | ---------- |
| 列数       | 网格布局的列数       | 3      | 1-12       |
| 行数       | 自动生成行数         | auto   | 自动       |
| 列间距     | 列之间的间距         | 20px   | 0-50px     |
| 行间距     | 行之间的间距         | 20px   | 0-50px     |
| 最小行高   | 每行的固定高度       | 60px   | 固定60px   |
| 显示网格线 | 是否显示网格边界线   | true   | true/false |

### 使用方法

1. **基础操作**
   - 从组件库拖拽组件到网格画布
   - 组件自动对齐到网格单元格
   - 每个组件占用一个单元格（60px高度）

2. **布局配置**
   - 在右侧"布局"面板调整网格参数
   - 使用预设模板（2列、3列、4列、6列）
   - 实时预览配置变更效果

3. **网格可视化**
   - 蓝色网格线清晰显示单元格边界
   - 外边框标识整个网格区域
   - 支持网格线显示/隐藏切换

## 🏗️ 技术架构

### 核心技术栈

- **Vue 3**：使用 Composition API 构建
- **Vuetify 3**：Material Design 组件库
- **Pinia**：状态管理
- **Vite**：构建工具
- **CSS Grid**：原生网格布局系统

### 项目结构

```
src/
├── modules/                    # 功能模块
│   ├── ComponentLibrary/       # 组件库面板
│   ├── DragArea/              # 设计画布
│   ├── GridLayout/            # Grid布局框架
│   │   ├── GridLayoutFramework.vue  # 网格布局核心组件
│   │   └── GridConfigPanel.vue      # 网格配置面板
│   ├── PropertyPanel/         # 属性配置面板
│   └── CodeGenerator/         # 代码生成器
├── stores/                    # 状态管理
│   ├── designer.js           # 设计器状态管理
│   └── components.js         # 组件定义和配置
├── utils/                     # 工具函数
│   └── gridUtils.js          # 网格布局工具函数
├── views/                     # 页面视图
└── plugins/                   # 插件配置
```

### 核心模块

1. **Grid 布局框架** (`modules/GridLayout/`)
   - **GridLayoutFramework.vue**：网格布局可视化显示和交互
   - **GridConfigPanel.vue**：网格布局配置界面
   - 支持1-12列配置、间距设置、预设模板

2. **网格工具函数** (`utils/gridUtils.js`)
   - 坐标转换：像素坐标与网格坐标互转
   - 位置计算：单元格尺寸、可用位置查找
   - 样式生成：网格容器和项目CSS样式
   - 网格线渲染：清晰的可视化网格线

3. **设计器状态管理** (`stores/designer.js`)
   - 组件管理：添加、删除、更新组件
   - 网格布局管理：网格配置和组件位置管理
   - 历史管理：撤销、重做操作
   - 自动排列：智能重排组件到网格布局

4. **组件定义** (`stores/components.js`)
   - 组件库定义：类型、属性、配置架构
   - 组件实例创建：包含网格位置信息
   - 分类管理：按功能分类组件

5. **代码生成器** (`modules/CodeGenerator/`)
   - 网格样式生成：根据配置生成CSS Grid样式
   - Vue模板生成：生成完整的Vue组件代码
   - 确保设计器与生成代码的一致性

## 🔧 技术细节

### 数据结构

#### 网格配置结构
```javascript
// formConfig.layout
{
  type: 'grid',           // 布局类型
  columns: 3,             // 列数 (1-12)
  rows: 'auto',           // 行数 (自动)
  columnGap: '20px',      // 列间距
  rowGap: '20px',         // 行间距
  minRowHeight: '60px',   // 固定行高
  showGridLines: true     // 显示网格线
}
```

#### 组件网格位置结构
```javascript
// component.gridPosition
{
  column: 1,              // 起始列 (1-based)
  row: 1,                 // 起始行 (1-based)
  columnSpan: 1,          // 跨列数 (固定为1)
  rowSpan: 1              // 跨行数 (固定为1)
}
```

### 核心算法

1. **坐标转换**：像素坐标与网格坐标的精确转换
2. **位置计算**：自动查找下一个可用的网格位置
3. **网格渲染**：使用repeating-linear-gradient生成清晰的网格线

## 🔧 自定义开发

### 添加新组件

在 `stores/components.js` 中定义新组件：

```javascript
{
  type: 'custom-component',
  name: '自定义组件',
  icon: 'mdi-puzzle',
  category: 'custom',
  defaultProps: {
    // 默认属性
  },
  configSchema: [
    // 属性配置架构
  ]
}
```

### 扩展网格功能

在 `utils/gridUtils.js` 中添加新的工具函数：

```javascript
export function customGridFunction(params) {
  // 自定义网格处理逻辑
}
```

### 自定义主题

修改 `src/plugins/vuetify.js` 中的主题配置：

```javascript
const theme = {
  themes: {
    light: {
      colors: {
        primary: "#1976D2",
        // 其他颜色配置
      },
    },
  },
};
```

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request！

### 贡献方向

1. **功能增强**
   - 新的网格配置选项
   - 更智能的自动排列算法
   - 性能优化建议

2. **Bug 修复**
   - 网格坐标计算问题
   - 拖拽交互异常
   - 样式显示错误

3. **文档完善**
   - 使用教程和示例
   - API 文档补充
   - 最佳实践分享

### 贡献流程

1. Fork 本仓库
2. 创建特性分支：`git checkout -b feature/enhancement`
3. 提交更改：`git commit -m 'Add enhancement feature'`
4. 推送分支：`git push origin feature/enhancement`
5. 提交 Pull Request

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情。

## 🙏 致谢

- [Vue.js](https://vuejs.org/) - 渐进式 JavaScript 框架
- [Vuetify](https://vuetifyjs.com/) - Vue.js 的 Material Design 组件框架
- [Vite](https://vitejs.dev/) - 下一代前端构建工具
- [Pinia](https://pinia.vuejs.org/) - Vue.js 的状态管理库
